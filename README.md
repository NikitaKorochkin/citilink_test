# citilink_test
### Описание
Сравнение конкретных позиций на маркетплейсе https://www.citilink.ru
Задание: получить данные по самом дешевым видеокартам gtx 1660ti и rtx 3060. Сравнить, что самая дешевая gtx 1660ti стоит дешевле самой дешевой rtx 3060.

Тех. условия:
Шаги создавать с помощью аллюра. Предусмотреть получение и сравнения цен других видеокарт. Перед получением цены проделать следующие шаги:
- открыть каталог, навести на "Ноутбуки и компьютеры", выбрать "Видеокарты". В данном шаге/шагах использовать явные ожидания, чтобы избежать возможных ошибок при медленной работе сайта.
- через поиск найти нужную видеокарту, выбрать сортировку по возрастанию цены(1 клик).
В шаг сравнения цен вывести информацию о сравниваемых ценах.
Шаги поиска видеокарты должны быть универсальными для разных видеокарт и содержать в названии шага название искомой видеокарты

Стек: Selenium, Allure, JUnit, PageObject+PageFactory, Java 8+

### Решение 
Для практики в использовании коллекций и Stream API для получения самой дешевой видеокарты указанной модели использовал ```HashMap<String, Integer>```.
На странице конкретной модели я получал данные для мапы следующим образом: для ключа брал полное название товара из элемента содержащего ссылку на конкретную позицию,
затем получал цену - значение мапы. В итоге в HashMap оказываются все видеокарты нужной модели вида {Название=Цена}. Важно: позиции, которых нет в наличии так же отображаются,
моя реалицазия в мапу их не включает. После получения всех необходимых моделей сортирую HashMap, получаю самую дешевую видеокарту и ее цену для отображения в Alure. Далее
очищаю HashMap и использую повторно для следующей модели. Финальным шагом я убеждаюсь в поставленном условии (цена на самую дешевую видеокарту gtx 1660ti меньше, чем на самую дешевую rtx 3060).


### TODO
1. Добавить скриншоты конкретных моделей
2. Убрать дескриптор page в allure-отчете
3. Добавить функционал AllureEdit
4. ?Возможно заменить steps, возвращающие значения на asserts
5. Расширить обработку флага ```isPageLoaded()``` для каждой страницы (сфокусироваться на независимом элементе, не исчезающем при открытии панели с моделями в фильтрах)
6. Избавиться от hardcoded объявлений и параметров, где это возможно
7. !Добавить обработку ошибок и исключений
8. Добавить Cucumber
